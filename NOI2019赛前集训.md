# NOI2019赛前集训

UPD：19/6/11 开始了一个大坑：）

## 6.11

### A.标记的连接图

​	~~简单的dp~~，发现所有状态都可以若干层。于是设$f_{i,j}$表示由$i$个点组成的图中，最后一层由$j$个点组成的图的个数，$g_{i,j}$表示.....所有点到跟的距离和。转移就是考虑连接这一层点和上一层点，还有新加的点互相连，最后答案要乘$(n-2)!$。

### B.游戏

​	北京集训时写过，顺便补上题解。先把两个数组排序，然后二分答案。现在图变成了一个二分图，问题变成了二分图博弈问题。现在问题变成$(a_1,b_1)$在不在二分图里面，不好做。二分图最大匹配=点数-二分图最大独立集。要求的就是$(a_1,b_1)$不在某一个最大独立集中。求最大独立集就是相当于找一个划分点，这个点左上方所有的黑点个数+右下方所有白点个数。

### C.脑部进食

​	很容易就可以想到$O((n|s_1||s_2|)^3)$的高消做法。然后发现转移方程的最后一维是分层的，于是可以做到$O((n|s_1|)^3|s_2|)​$。

## 6.12

### A.集合

​	$k=2$可以$O(n^2)$做。

​	$k=3，k=4$要推容斥系数。发现$F$的系数要么是0要么是1，所以可以$n^2$预处理每一段区间，它们是由若干个一次函数叠加起来的，然后就可以方便区间求和。预处理完后就可以双指针处理所有函数。我把每种情况都写了一个函数，相当麻烦。

### B.棋盘

​	~~咕咕咕~~

​	搞出来了。结论就是阶梯nim的结论。但是当$k$为偶数，且特殊棋子在第二位的时候要特判。

### C.序列

​	场上怎么就没想出来？？（被SA搞了，以后还是乖乖想SAM吧）

​	后缀树的形态不会变，变的只是某些点的儿子的顺序。发生的变化只有$O(N)$种，发生变化的点的个数是$N​$。于是平衡树维护dfs序。没了

## 6.14

### A.算法

​	每个点对染色方案数的贡献是$n-与它相邻的编号大于它的点数$，考虑维护每个点的贡献。拿set维护每个点的出边，从小到大做启发式合并。

### B.Triangular Lamp

​	atcoder原题，可以把所有点都转移到$x+y=C$的直线上，这个图是和初始图是等价的，然后把一个点转移到每一条直线的图画出来，是一个模2下的杨辉三角，每一行的最后一位和第一位一定是亮的，如果我们能找到这两个点，就一定能找到初始的那个点。

​	我们在研究一下这个杨辉三角的性质，发现它是一个谢尔宾斯基三角形。根据谢尔宾斯基三角形的性质，如果我们找到某个黑点，我们就能每次跳2的k次方找到最左边和最右边。问题转为如何找到一个黑点。

​	为了找到这个黑点，我们需要利用这个式子：
$$
\exists k,\Sigma_{x\ mod\ 3=k}\binom{n}{x}\equiv 1(mod\ 2)
$$
​	然后可以递归做，每次找到mod 2=1的那边。求这个式子显然是一个数位dp。

复杂度：$O(Nlog^2MAX)$。

### C.Hatto Nero

​	二维数据结构sb题。

## 6.15

### A. 智慧树(tree)

​	循环卷积板子题，bluestein做。
$$
\begin{align}
F(\omega^i)&=\Sigma_{j=0}^{n-1}f_j\omega^{ij}\\
&=\Sigma_{j=0}^{n-1}f_j\omega^{\frac{(i+j)^2-i^2-j^2}{2}}
\end{align}
$$

### B.组合数(combination)

​	数位dp加容斥，可以优化到3的n次方。第一次会从小到大地dp。

### C.(string)

​	数据结构题。

​	分三种情况做。

​	第一种是找到每个$a_i​$是最大值的极大区间，做三维数点。

​	第二种是二分询问区间的最小的满足条件的前缀。

​	第二种是二分询问区间的最小的满足条件的后缀。

​	找到一段区间最f值，可以SAM+启发式合并做。

​	时空复杂度都是$O(nlog^2n)$。

​	还有一种每次在线段树插入最大值的做法by yww。

## 6.17

### A.Multiple of Nine

​	题目中的约束相当于让数列中若干个位置的前缀和模9同余。我们把这几个约束的位置提出来，如果这几个位置的值是确定的，那么这个数列的方案是可以算出来的，是$\Pi_ival_i$，其中val是每两个空之间填数的方案数($0\to10^L-1$中模9余k的数的个数)。

​	子集卷积可以完成。$O(8*3^Q)$。

### B.Paths

​	先数出三元环和四元环，然后分类讨论容斥一下。$O(M\sqrt M)$。

### C.Distinct Boxes

​	http://192.168.102.138/JudgeOnline/viewsolution.php?cid=1603&pid=2

## 6.18

### A. 无向图(graph)

​	分治加按秩合并dsu，两个log正解。

​	lct一个log暴力

### B.线段树(segment)

​	发现操作序列可以预处理，于是可以莫队+点分治。

### C.玩游戏(game)

​	乱搞，维护01区间。